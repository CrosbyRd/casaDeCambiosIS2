{% extends "base.html" %}
{% block title %}Tipos de Medio de Pago ‚Äî Global Exchange{% endblock %}

{% block content %}
<main class="max-w-6xl mx-auto px-6 py-10">

  <!-- Encabezado -->
  <header class="flex items-center justify-between mb-8">
    <div>
      <h1 class="text-4xl font-extrabold mb-2 text-[var(--ink)]">
        üí≥ Tipos de Medio de Pago
      </h1>
      <p class="text-lg leading-relaxed max-w-2xl text-[var(--muted)]">
        Aqu√≠ puedes gestionar los tipos de medio de pago habilitados en el sistema.
      </p>
    </div>

    <div class="flex gap-3">
      <a href="{% url 'admin_panel:dashboard' %}"
         class="px-4 py-2 rounded-lg font-semibold border text-[var(--ink)] hover:bg-[var(--brand-soft)]"
         style="border-color:var(--line)">
        ‚Üê Volver al Panel
      </a>

      <a href="{% url 'pagos:agregar_tipo_medio_pago' %}"
         class="px-4 py-2 rounded-lg font-bold text-white shadow-sm"
         style="background:var(--brand)">
        ‚ûï Agregar Tipo
      </a>
    </div>
  </header>

  <!-- Tabla -->
  <section class="bg-white border rounded-xl shadow-sm" style="border-color:var(--line)">
    <table class="w-full border-collapse">
      <thead class="bg-[var(--brand)] text-white">
        <tr>
          <th class="px-4 py-3 text-left">Nombre</th>
          <th class="px-4 py-3 text-left">Estado</th>
          <!-- m√°s ancho + no wrap -->
          <th class="px-4 py-3 text-left whitespace-nowrap" style="width: 460px;">Acciones</th>
        </tr>
      </thead>

      <tbody>
        {% for tipo in tipos %}
        <tr class="hover:bg-[var(--brand-soft)]">
          <td class="px-4 py-3 font-medium">{{ tipo.nombre }}</td>

          <td class="px-4 py-3">
            {% if tipo.activo %}
              <span class="px-2 py-1 rounded-md text-green-700 bg-green-100 font-semibold">Activo</span>
            {% else %}
              <span class="px-2 py-1 rounded-md text-red-700 bg-red-100 font-semibold">Inactivo</span>
            {% endif %}
          </td>

          <!-- evita saltos + todos los botones en una fila -->
          <td class="px-4 py-3 whitespace-nowrap">
            <div class="flex flex-nowrap items-center gap-2">

              <a href="{% url 'pagos:ver_tipo_medio_pago' tipo.pk %}"
                 class="px-3 py-1 rounded-md font-semibold text-[var(--ink)] bg-white border hover:bg-[var(--brand-soft)]"
                 style="border-color:var(--line)">
                Ver
              </a>

              <a href="{% url 'pagos:editar_tipo_medio_pago' tipo.pk %}"
                 class="px-3 py-1 rounded-md font-semibold text-[var(--ink)] bg-[var(--brand-soft)] hover:opacity-90">
                Editar
              </a>

              <form method="post" action="{% url 'pagos:toggle_activo' tipo.pk %}"
                    class="inline-block">
                {% csrf_token %}
                {% if tipo.activo %}
                  <button type="submit"
                          class="px-3 py-1 rounded-md font-semibold text-[var(--ink)] bg-yellow-400 hover:bg-yellow-500">
                    Desactivar
                  </button>
                {% else %}
                  <button type="submit"
                          class="px-3 py-1 rounded-md font-semibold text-white bg-green-600 hover:bg-green-700">
                    Activar
                  </button>
                {% endif %}
              </form>

              <form method="post" action="{% url 'pagos:eliminar_tipo_medio_pago' tipo.pk %}"
                    class="inline-block"
                    onsubmit="return confirm('¬øEliminar \{{ tipo.nombre }}\?');">
                {% csrf_token %}
                <button type="submit"
                        class="px-3 py-1 rounded-md font-semibold text-white bg-red-600 hover:bg-red-700">
                  Eliminar
                </button>
              </form>

            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="3" class="px-4 py-6 text-center text-[var(--muted)]">
            No hay tipos de medio de pago registrados.
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
</main>
{% endblock %}
