{% extends "base.html" %}
{% block title %}Global Exchange{% endblock %}

{% block content %}
<main class="max-w-5xl mx-auto px-6 py-10">

  <!-- Encabezado -->
  <header class="mb-6">
    <h1 class="text-4xl font-extrabold mb-2 text-[var(--ink)]">➕ {{ accion }} Tipo de Medio de Pago</h1>
    <p class="text-lg leading-relaxed max-w-2xl text-[var(--muted)]">
      Completa la información para registrar un nuevo tipo de medio de pago en el sistema.
    </p>
  </header>

  <!-- Caja principal con el mismo patrón visual que “Agregar Cotización” -->
  <section class="bg-white border rounded-xl shadow-sm overflow-hidden" style="border-color:var(--line)">
    <form method="post" novalidate>
      {% csrf_token %}

      <style>
        .form-slab input[type="text"],
        .form-slab input[type="number"],
        .form-slab input[type="checkbox"],
        .form-slab select, .form-slab textarea {
          width: 100%;
          border: 1.5px solid var(--line);
          border-radius: 12px;
          padding: 12px 14px;
          height: 48px;
          font-size: 1rem;
          color: var(--ink);
          background: #fff;
          box-shadow: 0 1px 2px rgba(0,0,0,.03);
          transition: box-shadow .2s ease, border-color .2s ease;
        }
        .form-slab input[type="checkbox"]{ height: 20px; width: 20px; padding: 0; border-radius: 6px; }
        .form-slab input:focus, .form-slab select:focus, .form-slab textarea:focus{
          outline: none; border-color: var(--brand);
          box-shadow: 0 0 0 3px rgba(115,60,255,.15);
        }
        .help { font-size:.9rem; color:var(--muted); margin-top:.35rem }
        .err  { color:#991b1b; background:#fee2e2; border:1px solid #fecaca; padding:.5rem .75rem; border-radius:.5rem; }
      </style>

      <div class="form-slab">
        <div class="overflow-x-auto">
          <table class="w-full border-collapse">
            <thead class="bg-[var(--brand)] text-white">
              <tr><th class="px-4 py-3 text-left">Nombre</th></tr>
            </thead>
            <tbody>
              <tr class="border-b" style="border-color:var(--line)">
                <td class="px-4 py-4">
                  {{ form.nombre }}
                  <div class="help">Ej.: “Tarjeta de Crédito”, “Billetera Electrónica”, “Cheque”.</div>
                  {% if form.nombre.errors %}<div class="err mt-2">{{ form.nombre.errors|join:", " }}</div>{% endif %}
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="overflow-x-auto">
          <table class="w-full border-collapse">
            <thead class="bg-[var(--brand)] text-white">
              <tr>
                <th class="px-4 py-3 text-left">Comisión porcentaje (%)</th>
                <th class="px-4 py-3 text-left">Bonificación porcentaje (%)</th>
              </tr>
            </thead>
            <tbody>
              <tr class="border-b" style="border-color:var(--line)">
                <td class="px-4 py-4">
                  {{ form.comision_porcentaje }}
                  <div class="help">Comisión en % del monto total (0–100).</div>
                  {% if form.comision_porcentaje.errors %}<div class="err mt-2">{{ form.comision_porcentaje.errors|join:", " }}</div>{% endif %}
                </td>
                <td class="px-4 py-4">
                  {{ form.bonificacion_porcentaje }}
                  <div class="help">Descuento/bonificación en % aplicado (0–100).</div>
                  {% if form.bonificacion_porcentaje.errors %}<div class="err mt-2">{{ form.bonificacion_porcentaje.errors|join:", " }}</div>{% endif %}
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="overflow-x-auto">
          <table class="w-full border-collapse">
            <thead class="bg-[var(--brand)] text-white">
              <tr><th class="px-4 py-3 text-left">Estado</th></tr>
            </thead>
            <tbody>
              <tr>
                <td class="px-4 py-4">
                  <label class="flex items-center gap-3">
                    {{ form.activo }}
                    <span class="font-semibold text-[var(--ink)]">Activo</span>
                  </label>
                  <div class="help">Si está desactivado no se podrá utilizar en operaciones.</div>
                  {% if form.activo.errors %}<div class="err mt-2">{{ form.activo.errors|join:", " }}</div>{% endif %}
                </td>
              </tr>
            </tbody>
          </table>
        </div>

      </div>

      <!-- Acciones -->
      <div class="flex flex-col sm:flex-row justify-end gap-3 p-4">
        <a href="{% url 'pagos:listar_tipos_medio_pago' %}" class="px-5 py-2 rounded-lg font-semibold text-white bg-red-600 hover:bg-red-700">
          Cancelar
        </a>
        <button type="submit" class="px-6 py-2 rounded-lg font-bold text-white shadow-sm" style="background:var(--brand)">
          {{ accion }}
        </button>
      </div>
    </form>
  </section>
</main>
{% endblock %}
