{% extends "base.html" %}
{% block header_auth %}{% endblock %}

{% block content %}
<section class="container py-10">
  <h1 class="h1">Crear cuenta</h1>

  <div class="grid gap-6 md:grid-cols-2 items-start">
    <!-- FORM -->
    <form method="post" action="{% url 'usuarios:register' %}" class="box form" novalidate>
      {% csrf_token %}

      {% if messages %}
        <div class="form-alert" role="alert" aria-live="polite">
          {% for message in messages %}{{ message }}{% if not forloop.last %}<br>{% endif %}{% endfor %}
        </div>
      {% endif %}

      {% if form.non_field_errors %}
        <div class="form-alert" role="alert" aria-live="polite">
          {% for e in form.non_field_errors %}{{ e }}{% if not forloop.last %}<br>{% endif %}{% endfor %}
        </div>
      {% endif %}

      <p>
        <label for="id_first_name">Nombre</label>
        <input id="id_first_name" name="first_name" type="text" autocomplete="given-name" required
               value="{{ form.first_name.value|default_if_none:'' }}">
        {% for e in form.first_name.errors %}<span class="text-red-600 text-sm">{{ e }}</span>{% endfor %}
      </p>

      <p>
        <label for="id_last_name">Apellido</label>
        <input id="id_last_name" name="last_name" type="text" autocomplete="family-name" required
               value="{{ form.last_name.value|default_if_none:'' }}">
        {% for e in form.last_name.errors %}<span class="text-red-600 text-sm">{{ e }}</span>{% endfor %}
      </p>

      <p>
        <label for="id_email">Email</label>
        <input id="id_email" name="email" type="email" autocomplete="email" required
               value="{{ form.email.value|default_if_none:'' }}" placeholder="tu@correo.com">
        {% for e in form.email.errors %}<span class="text-red-600 text-sm">{{ e }}</span>{% endfor %}
      </p>

      <p>
        <label for="id_password">Contraseña</label>
        <input id="id_password" name="password" type="password" autocomplete="new-password" required placeholder="••••••••">
        {% for e in form.password.errors %}<span class="text-red-600 text-sm">{{ e }}</span>{% endfor %}
        <small class="helptext">Usá al menos 8 caracteres.</small>
      </p>

      <p>
        <label class="inline-flex items-center gap-3">
          <input id="id_terms" name="terms" type="checkbox" {% if form.terms.value %}checked{% endif %} required>
          <span>Acepto <a class="text-brand hover:underline" href="{% url 'site_legal' %}">términos y privacidad</a></span>
        </label>
        {% for e in form.terms.errors %}<span class="text-red-600 text-sm">{{ e }}</span>{% endfor %}
      </p>

      <div class="actions">
        <button class="btn w-full" type="submit">Registrarme</button>
        <a href="{% url 'login' %}" class="btn-ghost">Ya tengo cuenta</a>
      </div>
    </form>

    <!-- INFO -->
    <aside class="box">
      <h2 class="h2">Verificación por correo</h2>
      <p class="muted">Te enviaremos un <strong>código de verificación</strong> para activar la cuenta.</p>
      <ul class="muted" style="margin: .75rem 0 0; padding-left:1.2rem;">
        <li>Es de un solo uso y expira a los minutos.</li>
        <li>Si no llega, revisá spam o reenviá el código.</li>
        <li>Atención por correo de L–V, 9–18h.</li>
      </ul>
    </aside>
  </div>
</section>
{% endblock %}
