{% extends "base.html" %}

{% block content %}
<section class="max-w-[1200px] mx-auto px-6 py-10 grid md:grid-cols-2 gap-10 items-center">
  <!-- Hero -->
  <div>
    <h1 class="text-5xl font-extrabold tracking-tight leading-tight mb-6">
      Cambia dinero sin<br/>complicaciones
    </h1>
    <p class="text-lg text-neutral-700 mb-8">
      Global Exchange te ofrece tipos de cambio competitivos, transparencia y soporte humano.
    </p>
    <div class="flex gap-4">
      <a href="{% url 'site_rates' %}" class="btn">Empezar a cotizar</a>
      <a href="{% url 'site_how_it_works' %}" class="btn-secondary">Ver cÃ³mo funciona</a>
    </div>
  </div>

  <!-- Tasas destacadas (dinÃ¡micas) -->
  <aside class="rounded-2xl border border-neutral-200 shadow-sm overflow-hidden">
    <div class="p-6 border-b border-neutral-200 flex items-center justify-between">
      <h2 class="text-2xl font-bold">Tasas destacadas</h2>
      {% if ultima_actualizacion %}
        <p class="text-sm text-neutral-500">Actualizado hace {{ ultima_actualizacion|timesince }}</p>
      {% endif %}
    </div>

    {% if destacadas %}
      <ul class="p-6 space-y-4">
        {% for r in destacadas %}
        <li class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <span class="currency-emoji text-xl" data-code="{{ r.codigo }}"></span>
            <span class="font-semibold">{{ r.codigo }}</span>
            <span class="text-neutral-500">â†’</span>
            <span class="currency-emoji text-xl" data-code="{{ destino_publico }}"></span>
            <span class="text-neutral-500">{{ destino_publico }}</span>
          </div>
          <div class="text-right">
            <div class="font-semibold">{{ r.valor_venta|floatformat:0 }}</div>
          </div>
        </li>
        {% endfor %}
      </ul>
    {% else %}
      <div class="p-6 text-neutral-600">AÃºn no hay cotizaciones para mostrar.</div>
    {% endif %}

    <div class="p-6 border-t border-neutral-200">
      <a href="{% url 'site_rates' %}" class="btn-secondary block text-center">Ver todos los tipos</a>
    </div>
  </aside>
</section>

<script>
  // Mapeo de banderas (incluye PYG)
  (function(){
    const MAP={USD:"ðŸ‡ºðŸ‡¸",EUR:"ðŸ‡ªðŸ‡º",ARS:"ðŸ‡¦ðŸ‡·",BRL:"ðŸ‡§ðŸ‡·",CLP:"ðŸ‡¨ðŸ‡±",COP:"ðŸ‡¨ðŸ‡´",MXN:"ðŸ‡²ðŸ‡½",PEN:"ðŸ‡µðŸ‡ª",PYG:"ðŸ‡µðŸ‡¾",UYU:"ðŸ‡ºðŸ‡¾",GBP:"ðŸ‡¬ðŸ‡§",JPY:"ðŸ‡¯ðŸ‡µ",CNY:"ðŸ‡¨ðŸ‡³",AUD:"ðŸ‡¦ðŸ‡º",CAD:"ðŸ‡¨ðŸ‡¦",CHF:"ðŸ‡¨ðŸ‡­"};
    document.querySelectorAll('.currency-emoji').forEach(el=>{
      const code=String(el.dataset.code||'').toUpperCase();
      el.textContent=(MAP[code]||"ðŸ’±")+" ";
    });
  })();
</script>
{% endblock %}
