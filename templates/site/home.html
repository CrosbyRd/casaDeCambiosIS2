{% extends "base.html" %}
{% load l10n %}
{% block title %}Global Exchange{% endblock %}

{% block content %}
<section class="max-w-[1200px] mx-auto px-6 py-10">
  <div class="grid md:grid-cols-[1.1fr,0.9fr] gap-10 items-start">
    <div class="self-start">
      <h1 class="h1">Cambia dinero sin complicaciones</h1>
      <p class="lead">Global Exchange te ofrece tipos de cambio competitivos, transparencia y soporte humano.</p>
      <div class="mt-8 flex items-center gap-3">
        <a href="{% url 'site_calculator' %}" class="btn">Empezar a cotizar</a>
        <a href="{% url 'site_how_it_works' %}" class="btn-secondary">Ver c√≥mo funciona</a>
      </div>
    </div>

    <!-- Cotizaciones destacadas (din√°micas) -->
    <div class="bg-neutral-50 rounded-lg p-6">
      {% if cotizaciones_destacadas %}
        <div class="grid gap-5">
          {% for c in cotizaciones_destacadas %}
            <div class="flex items-center justify-between">
              <span class="font-medium">
                <span class="currency-emoji" data-code="{{ c.moneda_destino.codigo }}"></span>
                {{ c.moneda_destino.codigo }}
              </span>

              <!-- Compra / Venta en l√≠nea -->
              <div class="flex items-baseline gap-6 text-right">
                <div class="flex items-baseline gap-2">
                  <span class="text-sm text-neutral-500">Compra</span>
                  <span class="text-brand font-semibold">{{ c.total_compra|unlocalize|floatformat:0 }}</span>
                </div>
                <div class="flex items-baseline gap-2">
                  <span class="text-sm text-neutral-500">Venta</span>
                  <span class="font-semibold">{{ c.total_venta|unlocalize|floatformat:0 }}</span>
                </div>
              </div>
            </div>
          {% endfor %}

          <a href="{% url 'site_rates' %}" class="btn-secondary">Ver todos los tipos</a>
        </div>
      {% else %}
        <p class="muted">A√∫n no hay cotizaciones cargadas.</p>
      {% endif %}
    </div>
  </div>
</section>

<section class="max-w-[1200px] mx-auto px-6 py-6">
  <h2 class="h2 mb-6">Por qu√© elegirnos</h2>
  <div class="grid md:grid-cols-3 gap-6">
    <article class="box">
      <h3 class="box-title">Transparencia total</h3>
      <p class="muted">Sin costos escondidos. Ves el total antes de confirmar.</p>
    </article>
    <article class="box">
      <h3 class="box-title">Velocidad</h3>
      <p class="muted">Operaciones r√°pidas a cuentas locales.</p>
    </article>
    <article class="box">
      <h3 class="box-title">Soporte humano</h3>
      <p class="muted">Agentes reales por correo electronico cuando lo necesites.</p>
    </article>
  </div>
</section>

<script>
(function(){
  const MAP = {USD:"üá∫üá∏", EUR:"üá™üá∫", ARS:"üá¶üá∑", BRL:"üáßüá∑", CLP:"üá®üá±", COP:"üá®üá¥",
               MXN:"üá≤üáΩ", PEN:"üáµüá™", PYG:"üáµüáæ", UYU:"üá∫üáæ", GBP:"üá¨üáß", JPY:"üáØüáµ",
               CNY:"üá®üá≥", AUD:"üá¶üá∫", CAD:"üá®üá¶", CHF:"üá®üá≠"};
  document.querySelectorAll('.currency-emoji').forEach(el=>{
    const code = String(el.dataset.code||'').toUpperCase();
    el.textContent = (MAP[code] || "üí±") + " ";
  });
})();
</script>
{% endblock %}
