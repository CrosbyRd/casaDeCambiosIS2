{% extends "base.html" %}
{% block title %}Medios de Acreditaci√≥n - Global Exchange{% endblock %}
{% block content %}
<main class="max-w-6xl mx-auto px-6 py-10">
  <header class="flex items-center justify-between mb-8">
    <div>
      <h1 class="text-4xl font-extrabold mb-2 text-[var(--ink)]">üè¶ Medios de Acreditaci√≥n</h1>
      <p class="text-lg leading-relaxed max-w-2xl text-[var(--muted)]">
        Configura los medios disponibles para acreditar fondos en PYG (transferencia, billetera, pickup).
      </p>
    </div>
    <div class="flex gap-3">
      <a href="{% url 'admin_panel:dashboard' %}" class="px-4 py-2 rounded-lg font-bold bg-[var(--brand-soft)] text-[var(--brand-dark)] hover:brightness-95">
        ‚¨Ö Volver al Panel
      </a>
      <a href="{% url 'medios_acreditacion:agregar_categoria' %}" class="px-4 py-2 rounded-lg font-bold text-white shadow-sm" style="background:var(--brand)">
        ‚ûï Crear Medio
      </a>
    </div>
  </header>

  <section class="bg-white border rounded-xl shadow-sm overflow-hidden" style="border-color:var(--line)">
    <div class="overflow-x-auto">
      <table class="w-full border-collapse">
        <thead class="bg-[var(--brand)] text-white">
          <tr>
            <th class="px-4 py-3 text-left">C√≥digo</th>
            <th class="px-4 py-3 text-left">Requiere datos extra</th>
            <th class="px-4 py-3 text-left">Estado</th>
            <th class="px-4 py-3 text-left whitespace-nowrap">Acciones</th>
          </tr>
        </thead>
        <tbody>
          {% for c in categorias %}
          <tr class="hover:bg-[var(--brand-soft)]">
            <td class="px-4 py-3 font-medium">{{ c.get_codigo_display }}</td>
            <td class="px-4 py-3">{% if c.requiere_datos_extra %}‚úÖ S√≠{% else %}‚ùå No{% endif %}</td>
            <td class="px-4 py-3">
              {% if c.activo %}
                <span class="px-2 py-1 rounded-md text-green-700 bg-green-100 font-semibold">Activo</span>
              {% else %}
                <span class="px-2 py-1 rounded-md text-red-700 bg-red-100 font-semibold">Inactivo</span>
              {% endif %}
            </td>
            <td class="px-4 py-3 whitespace-nowrap">
              <div class="flex flex-nowrap items-center gap-2">
                <a href="{% url 'medios_acreditacion:ver_categoria' c.pk %}" class="px-3 py-1 rounded-md font-semibold text-[var(--ink)] bg-white border hover:bg-[var(--brand-soft)]" style="border-color:var(--line)">Ver</a>
                <a href="{% url 'medios_acreditacion:editar_categoria' c.pk %}" class="px-3 py-1 rounded-md font-semibold text-[var(--brand-dark)] bg-[var(--brand-soft)] hover:brightness-95">Editar</a>

                <form method="post" action="{% url 'medios_acreditacion:toggle_activo' c.pk %}" class="inline-block rounded-lg overflow-hidden">
                  {% csrf_token %}
                  {% if c.activo %}
                    <button type="submit" class="px-3 py-1 font-semibold text-white bg-yellow-500 hover:bg-yellow-600">Desactivar</button>
                  {% else %}
                    <button type="submit" class="px-3 py-1 font-semibold text-white bg-green-600 hover:bg-green-700">Activar</button>
                  {% endif %}
                </form>

                <a href="{% url 'medios_acreditacion:eliminar_categoria' c.pk %}" class="px-3 py-1 font-semibold text-white bg-red-600 hover:bg-red-700 rounded-lg">Eliminar</a>
              </div>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4" class="px-4 py-6 text-center text-[var(--muted)]">
              No hay medios de acreditaci√≥n registrados.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>
</main>
{% endblock %}
