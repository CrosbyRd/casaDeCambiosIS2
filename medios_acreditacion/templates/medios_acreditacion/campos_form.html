{% extends "base.html" %}
{% block title %}Global Exchange{% endblock %}

{% block content %}
<main class="max-w-3xl mx-auto px-6 py-10">
  <header class="mb-6">
    <h1 class="text-4xl font-extrabold mb-2 text-[var(--ink)]">
      üìù {% if form.instance.pk %}Editar Campo{% else %}Agregar Nuevo Campo{% endif %}
    </h1>
    <p class="text-lg leading-relaxed max-w-2xl text-[var(--muted)]">
      {% if form.instance.pk %}
        Modifica los detalles del campo seleccionado.
      {% else %}
        Completa la informaci√≥n para registrar un nuevo campo en el tipo de medio.
      {% endif %}
    </p>
  </header>

  <section class="bg-white border rounded-xl shadow-sm p-6" style="border-color:var(--line)">
    <form method="post" id="form-campo">
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="mb-4 p-3 rounded-md bg-red-50 text-red-700 text-sm">
          {{ form.non_field_errors }}
        </div>
      {% endif %}

      <div class="space-y-6">
        <!-- Nombre -->
        <div>
          <label for="{{ form.nombre.id_for_label }}" class="block font-medium text-[var(--ink)] mb-1">Nombre</label>
          {{ form.nombre }}
          {% if form.nombre.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.nombre.errors.0 }}</p>
          {% endif %}
        </div>

        <!-- Tipo de dato -->
        <div>
          <label for="{{ form.tipo_dato.id_for_label }}" class="block font-medium text-[var(--ink)] mb-1">Tipo de Dato</label>
          {{ form.tipo_dato }}
          {% if form.tipo_dato.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.tipo_dato.errors.0 }}</p>
          {% endif %}
        </div>

        <!-- Obligatorio -->
        <div class="flex items-center gap-2">
          {{ form.obligatorio }}
          <label for="{{ form.obligatorio.id_for_label }}" class="text-[var(--ink)]">Obligatorio</label>
        </div>

        <!-- Regex opcional -->
        <div>
          <label for="{{ form.regex.id_for_label }}" class="block font-medium text-[var(--ink)] mb-1">Regex (opcional)</label>
          {{ form.regex }}
          <p class="text-sm text-[var(--muted)] mt-1">
            Puedes definir una expresi√≥n regular personalizada para validar el campo.
          </p>
          {% if form.regex.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.regex.errors.0 }}</p>
          {% endif %}
        </div>
      </div>
    </form>
  </section>

  <!-- Botones -->
  <div class="flex justify-end gap-3 pt-2">
    <a href="{% url 'medios_acreditacion:tipos_list' %}"
       class="px-4 py-2 rounded-lg font-semibold text-white bg-red-600 hover:bg-red-700">
      Cancelar
    </a>
    <button type="submit" form="form-campo"
            class="px-6 py-2 rounded-lg font-bold text-white shadow-sm"
            style="background:var(--brand)">
      {% if form.instance.pk %}üíæ Guardar Cambios{% else %}‚ûï Agregar{% endif %}
    </button>
  </div>
</main>

<style>
  #id_nombre,#id_tipo_dato,#id_regex {
    width:100%;background:#fff;border:1.5px solid var(--line);
    border-radius:12px;padding:12px 14px;font-size:1rem;color:var(--ink);
    box-shadow:0 1px 2px rgba(0,0,0,.03);transition:box-shadow .2s,border-color .2s;
  }
  #id_nombre:focus,#id_tipo_dato:focus,#id_regex:focus {
    outline:none;border-color:var(--brand);
    box-shadow:0 0 0 3px rgba(115,60,255,.15);
  }
</style>
{% endblock %}
