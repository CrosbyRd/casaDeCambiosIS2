{% extends "base.html" %}

{% block site_header %}{% endblock %}

{% block extra_head %}
<style>.gx-aside{backdrop-filter:saturate(120%);}</style>
{% endblock %}

{% block content %}
{% url 'usuarios:dashboard' as dashboard_url %}

<div class="max-w-[1200px] mx-auto px-6 py-8 grid grid-cols-1 md:grid-cols-[260px,1fr] gap-6">

  <!-- Sidebar -->
  <aside class="gx-aside rounded-2xl border border-purple-200 bg-gradient-to-b from-purple-50 to-white p-4 md:sticky md:top-4 shadow-sm">
    <nav aria-label="Menú de cuenta" class="space-y-6">
      <div>
        <div class="mb-2 text-xs font-extrabold tracking-wide text-purple-700/80">GENERAL</div>
        <a href="{{ dashboard_url }}"
           aria-current="{% if request.path == dashboard_url %}page{% endif %}"
           class="group flex items-center justify-between px-4 py-2 rounded-xl transition
           {% if request.path == dashboard_url %} bg-white border border-purple-200 text-purple-900 font-semibold shadow-sm
           {% else %} text-purple-900/80 hover:bg-purple-100 hover:text-purple-900 {% endif %}">
          <span>Resumen</span><span class="opacity-0 group-hover:opacity-100 transition text-xs font-bold text-purple-700">●</span>
        </a>
      </div>

      <div>
        <div class="mb-2 text-xs font-extrabold tracking-wide text-purple-700/80">PRODUCTOS</div>
        <a href="#" class="flex items-center justify-between px-4 py-2 rounded-xl text-purple-900/80 hover:bg-purple-100 hover:text-purple-900 transition">
          <span>Cuentas</span><span class="text-xs font-bold text-purple-700/70 opacity-0 hover:opacity-100 transition">›</span>
        </a>
        <a href="#" class="mt-1 flex items-center justify-between px-4 py-2 rounded-xl text-purple-900/80 hover:bg-purple-100 hover:text-purple-900 transition">
          <span>Tarjetas</span><span class="text-xs font-bold text-purple-700/70 opacity-0 hover:opacity-100 transition">›</span>
        </a>
      </div>

      <div>
        <div class="mb-2 text-xs font-extrabold tracking-wide text-purple-700/80">GENERAL</div>
        <a href="#" class="flex items-center justify-between px-4 py-2 rounded-xl text-purple-900/80 hover:bg-purple-100 hover:text-purple-900 transition">
          <span>Transacciones</span><span class="text-xs font-bold text-purple-700/70 opacity-0 hover:opacity-100 transition">›</span>
        </a>
      </div>

      <div class="pt-2">
        <form method="post" action="{% url 'logout' %}">
          {% csrf_token %}
          <button type="submit" class="w-full text-left px-4 py-2 rounded-xl text-purple-900/80 hover:bg-purple-100 hover:text-purple-900 transition">
            Cerrar sesión
          </button>
        </form>
      </div>
    </nav>
  </aside>

  <!-- Contenido -->
  <section class="space-y-6">

    {% if messages %}
      <div class="space-y-2">
        {% for message in messages %}
          <div class="rounded-xl border border-purple-200 bg-purple-50 px-4 py-3 font-semibold text-purple-800 shadow-sm">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <!-- Encabezado usuario -->
    <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-4">
      <div>
        <h1 class="text-4xl md:text-5xl font-extrabold leading-tight">
          {% if request.user.first_name or request.user.last_name %}
            {{ request.user.first_name }} {{ request.user.last_name }}
          {% else %}
            {{ request.user.email }}
          {% endif %}
        </h1>
        <p class="text-neutral-500">{{ request.user.email }}</p>
      </div>

      <div class="rounded-2xl border border-neutral-200 p-4 w-full md:w-[320px] bg-white shadow-sm">
        <div class="flex items-center justify-between">
          <span class="inline-flex items-center gap-2 rounded-full bg-purple-50 px-3 py-1 text-sm font-bold text-purple-700">
            <span class="h-2 w-2 rounded-full bg-purple-500"></span> Cuenta personal
          </span>
          <span class="text-sm text-neutral-500">Último acceso: {{ request.user.last_login|date:"d/m/Y" }}</span>
        </div>
      </div>
    </div>

    <!-- Bloque: Cuentas + Últimas transacciones -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div class="rounded-2xl border border-neutral-200 p-5 bg-white shadow-sm">
        <h2 class="text-xl font-extrabold mb-4">Mis cuentas</h2>
        <div class="space-y-4">
          <div class="rounded-xl border border-neutral-200 p-4 bg-neutral-50">
            <div class="flex items-center justify-between">
              <div>
                <div class="font-bold">ACC-123456</div>
                <div class="text-sm text-neutral-500">Actualizado: 28/08/2025 &nbsp;&nbsp; Tipo: Corriente</div>
              </div>
              <div class="text-emerald-600 font-extrabold text-lg">$1,250</div>
            </div>
          </div>
          <div class="rounded-xl border border-neutral-200 p-4 bg-neutral-50">
            <div class="flex items-center justify-between">
              <div>
                <div class="font-bold">ACC-789012</div>
                <div class="text-sm text-neutral-500">Actualizado: 27/08/2025 &nbsp;&nbsp; Tipo: Corriente</div>
              </div>
              <div class="text-emerald-600 font-extrabold text-lg">$980</div>
            </div>
          </div>
        </div>
      </div>

      <div class="rounded-2xl border border-neutral-200 p-5 bg-white shadow-sm">
        <h2 class="text-xl font-extrabold mb-4">Últimas transacciones</h2>
        <div class="divide-y divide-neutral-200">
          <div class="py-3 flex items-center justify-between">
            <div class="min-w-0">
              <div class="font-bold">ACC-123456</div>
              <div class="text-sm text-neutral-500 truncate">Compra USD — 28/08/2025</div>
            </div>
            <div class="text-red-600 font-extrabold">-500</div>
          </div>
          <div class="py-3 flex items-center justify-between">
            <div class="min-w-0">
              <div class="font-bold">ACC-789012</div>
              <div class="text-sm text-neutral-500 truncate">Venta EUR — 27/08/2025</div>
            </div>
            <div class="text-emerald-600 font-extrabold">+300</div>
          </div>
          <div class="py-3 flex items-center justify-between">
            <div class="min-w-0">
              <div class="font-bold">ACC-123456</div>
              <div class="text-sm text-neutral-500 truncate">Comisión — 27/08/2025</div>
            </div>
            <div class="text-red-600 font-extrabold">-20</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Métodos de pago -->
    <div class="rounded-2xl border border-neutral-200 p-5 bg-white shadow-sm">
      <h2 class="text-xl font-extrabold mb-6">Métodos de pago</h2>

      <h3 class="font-extrabold mb-2">Tarjetas</h3>
      <div class="space-y-3 mb-6">
        <div class="flex items-center justify-between rounded-2xl border border-neutral-200 p-4 bg-neutral-50">
          <div class="flex items-center gap-3">
            <div class="h-10 w-16 rounded-xl bg-neutral-200"></div>
            <div>
              <div class="font-bold">EXCHANGE VISA <span class="ml-2 text-xs font-extrabold rounded-full bg-purple-100 px-2 py-0.5 text-purple-700">CREDIT</span></div>
              <div class="text-sm text-neutral-500">**** **** **** 6860 · Expira 08/27</div>
            </div>
          </div>
          <a href="#" class="btn-secondary">Ver detalles</a>
        </div>

        <div class="flex items-center justify-between rounded-2xl border border-neutral-200 p-4 bg-neutral-50">
          <div class="flex items-center gap-3">
            <div class="h-10 w-16 rounded-xl bg-neutral-200"></div>
            <div>
              <div class="font-bold">EXCHANGE MASTERCARD <span class="ml-2 text-xs font-extrabold rounded-full bg-purple-100 px-2 py-0.5 text-purple-700">DEBIT</span></div>
              <div class="text-sm text-neutral-500">**** **** **** 6650 · Expira 09/26</div>
            </div>
          </div>
          <a href="#" class="btn-secondary">Ver detalles</a>
        </div>
      </div>

      <h3 class="font-extrabold mb-2">Billeteras electrónicas</h3>
      <div class="space-y-3 mb-6">
        <div class="flex items-center justify-between rounded-2xl border border-neutral-200 p-4 bg-neutral-50">
          <div class="flex items-center gap-3">
            <span class="inline-flex items-center justify-center h-10 w-10 rounded-xl bg-purple-100 font-extrabold text-purple-700">Tigo</span>
            <div>
              <div class="font-bold">Tigo Money <span class="ml-2 text-xs font-extrabold rounded-full bg-purple-100 px-2 py-0.5 text-purple-700">WALLET</span></div>
              <div class="text-sm text-neutral-500">Teléfono asociado: 0983••••20</div>
            </div>
          </div>
          <a href="#" class="btn">Cambiar</a>
        </div>

        <div class="flex items-center justify-between rounded-2xl border border-neutral-200 p-4 bg-neutral-50">
          <div class="flex items-center gap-3">
            <span class="inline-flex items-center justify-center h-10 w-10 rounded-xl bg-purple-100 font-extrabold text-purple-700">Pers.</span>
            <div>
              <div class="font-bold">Personal Pay <span class="ml-2 text-xs font-extrabold rounded-full bg-purple-100 px-2 py-0.5 text-purple-700">WALLET</span></div>
              <div class="text-sm text-neutral-500">Teléfono asociado: 0971••••42</div>
            </div>
          </div>
          <a href="#" class="btn">Cambiar</a>
        </div>
      </div>

      <h3 class="font-extrabold mb-2">Cheques</h3>
      <div class="space-y-3">
        <div class="flex items-center justify-between rounded-2xl border border-neutral-200 p-4 bg-neutral-50">
          <div class="flex items-center gap-3">
            <span class="inline-flex items-center justify-center h-10 w-10 rounded-xl bg-neutral-200 font-extrabold text-neutral-700">CHQ</span>
            <div>
              <div class="font-bold">Cheque común <span class="ml-2 text-xs font-extrabold rounded-full bg-neutral-200 px-2 py-0.5 text-neutral-700">OFFLINE</span></div>
              <div class="text-sm text-neutral-500">Banco emisor: *Itapúa* · N° 00••827</div>
            </div>
          </div>
          <a href="#" class="btn-secondary">Ver detalles</a>
        </div>

        <div class="flex items-center justify-between rounded-2xl border border-neutral-200 p-4 bg-neutral-50">
          <div class="flex items-center gap-3">
            <span class="inline-flex items-center justify-center h-10 w-10 rounded-xl bg-neutral-200 font-extrabold text-neutral-700">CHQ+</span>
            <div>
              <div class="font-bold">Cheque adelantado <span class="ml-2 text-xs font-extrabold rounded-full bg-neutral-200 px-2 py-0.5 text-neutral-700">OFFLINE</span></div>
              <div class="text-sm text-neutral-500">Banco emisor: *Regional* · N° 00••114</div>
            </div>
          </div>
          <a href="#" class="btn-secondary">Ver detalles</a>
        </div>
      </div>

      <p class="mt-6 text-sm text-neutral-500">* Este dashboard es una maqueta visual y no realiza operaciones reales.</p>
    </div>

  </section>
</div>
{% endblock %}
