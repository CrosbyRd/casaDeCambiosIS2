{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Listado de Monedas â€” Global Exchange</title>
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>

  <main class="container container--tight">
    <header class="page-header page-header--tight">
      <h1 class="h1 h1--sm">Monedas</h1>
      <a href="{% url 'monedas:crear_moneda' %}" class="btn">Crear nueva moneda</a>
    </header>

    <section class="box box--tight no-padding">
      <div class="table-scroll table-wrap--max">
        <table class="table table--compact" id="monedas-table">
          <thead>
            <tr>
              <th>CÃ³digo</th>
              <th>Nombre</th>
              <th>SÃ­mbolo</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            {% for m in monedas %}
            <tr>
              <td class="cell-strong">
                <span class="currency-emoji" data-code="{{ m.codigo }}"></span>
                {{ m.codigo }}
              </td>
              <td>{{ m.nombre }}</td>
              <td>{{ m.simbolo }}</td>
              <td>
                <div class="action-row">
                  <a href="{% url 'monedas:editar_moneda' m.id %}" class="btn-secondary">Editar</a>
                  <a href="{% url 'monedas:eliminar_moneda' m.id %}" class="btn-ghost">Eliminar</a>
                </div>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="4" class="empty">No hay monedas registradas.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- PequeÃ±o mapa y script: aÃ±ade la bandera segÃºn el cÃ³digo -->
  <script>
    (function(){
      const MAP = {
        USD:"ðŸ‡ºðŸ‡¸", EUR:"ðŸ‡ªðŸ‡º", ARS:"ðŸ‡¦ðŸ‡·", BRL:"ðŸ‡§ðŸ‡·", CLP:"ðŸ‡¨ðŸ‡±", COP:"ðŸ‡¨ðŸ‡´",
        MXN:"ðŸ‡²ðŸ‡½", PEN:"ðŸ‡µðŸ‡ª", PYG:"ðŸ‡µðŸ‡¾", UYU:"ðŸ‡ºðŸ‡¾", GBP:"ðŸ‡¬ðŸ‡§", JPY:"ðŸ‡¯ðŸ‡µ",
        CNY:"ðŸ‡¨ðŸ‡³", AUD:"ðŸ‡¦ðŸ‡º", CAD:"ðŸ‡¨ðŸ‡¦", CHF:"ðŸ‡¨ðŸ‡­"
      };
      document.querySelectorAll('.currency-emoji').forEach(el => {
        const code = String(el.dataset.code || '').toUpperCase();
        el.textContent = (MAP[code] || "ðŸ’±") + " ";
      });
    })();
  </script>

</body>
</html>
